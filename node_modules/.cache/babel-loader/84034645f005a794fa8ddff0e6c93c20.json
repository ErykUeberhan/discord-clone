{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{BrowserRouter as Router,Route,Switch}from'react-router-dom';import'./App.css';import ChannelsList from'./ChannelsList';import Chat from'./Chat';import ChatMenu from'./ChatMenu';import Desktop from'./Desktop';import Friends from'./Friends';import MembersList from'./MembersList';import Menu from'./Menu';import{selectUser,login,logout}from'./features/counter/userSlice';import{auth}from'./firebase';import Login from'./Login';import firebase from'firebase';function App(){var dispatch=useDispatch();var user=useSelector(selectUser);var color=function color(rand){if(rand<=0.16){return\"rgb(255, \".concat(Math.ceil(Math.random()*255),\", 0)\");}else if(rand>0.16&&rand<=0.32){return\"rgb(255, 0, \".concat(Math.ceil(Math.random()*255),\")\");}else if(rand>0.32&&rand<=0.48){return\"rgb(\".concat(Math.ceil(Math.random()*255),\", 255, 0)\");}else if(rand>0.48&&rand<=0.64){return\"rgb(0, 255, \".concat(Math.ceil(Math.random()*255),\")\");}else if(rand>0.64&&rand<=0.8){return\"rgb(\".concat(Math.ceil(Math.random()*255),\", 0, 255)\");}else if(rand>0.8&&rand<=1){return\"rgb(0, \".concat(Math.ceil(Math.random()*255),\", 255)\");}};var u=firebase.auth().currentUser;var avatarColor=color(Math.random());if(user&&!u.photoURL){u.updateProfile({photoURL:avatarColor});console.log(u);}useEffect(function(){auth.onAuthStateChanged(function(authUser){console.log('user is:',authUser);if(authUser){dispatch(login({email:authUser.email}));}else{dispatch(logout());}});},[dispatch]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:user?/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsxs(Route,{path:\"/channel\",children:[/*#__PURE__*/_jsx(Menu,{}),/*#__PURE__*/_jsx(ChannelsList,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatField\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chatField_menu\",children:/*#__PURE__*/_jsx(ChatMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatField_desktop\",children:[/*#__PURE__*/_jsx(Chat,{}),/*#__PURE__*/_jsx(MembersList,{})]})]})]}),/*#__PURE__*/_jsxs(Route,{path:\"/\",children:[/*#__PURE__*/_jsx(Menu,{}),/*#__PURE__*/_jsx(Friends,{}),/*#__PURE__*/_jsx(Desktop,{})]})]}):/*#__PURE__*/_jsx(Route,{path:\"/\",children:/*#__PURE__*/_jsx(Login,{})})})});}export default App;","map":{"version":3,"sources":["C:/Users/eryko/Desktop/ReactProjects/discord-clone/src/App.js"],"names":["React","useEffect","useDispatch","useSelector","BrowserRouter","Router","Route","Switch","ChannelsList","Chat","ChatMenu","Desktop","Friends","MembersList","Menu","selectUser","login","logout","auth","Login","firebase","App","dispatch","user","color","rand","Math","ceil","random","u","currentUser","avatarColor","photoURL","updateProfile","console","log","onAuthStateChanged","authUser","email"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport './App.css';\r\nimport ChannelsList from './ChannelsList';\r\nimport Chat from './Chat';\r\nimport ChatMenu from './ChatMenu';\r\nimport Desktop from './Desktop';\r\nimport Friends from './Friends';\r\nimport MembersList from './MembersList';\r\nimport Menu from './Menu';\r\nimport { selectUser, login, logout } from './features/counter/userSlice';\r\nimport { auth } from './firebase'\r\nimport Login from './Login';\r\nimport firebase from 'firebase';\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n\r\n  const user = useSelector(selectUser);\r\n\r\n  const color = (rand) => {\r\n    if (rand <= 0.16) {\r\n      return `rgb(255, ${Math.ceil(Math.random() * 255)}, 0)`;\r\n    }\r\n    else if (rand > 0.16 && rand <= 0.32) {\r\n      return `rgb(255, 0, ${Math.ceil(Math.random() * 255)})`;\r\n    }\r\n    else if (rand > 0.32 && rand <= 0.48) {\r\n      return `rgb(${Math.ceil(Math.random() * 255)}, 255, 0)`;\r\n    }\r\n    else if (rand > 0.48 && rand <= 0.64) {\r\n      return `rgb(0, 255, ${Math.ceil(Math.random() * 255)})`;\r\n    }\r\n    else if (rand > 0.64 && rand <= 0.8) {\r\n      return `rgb(${Math.ceil(Math.random() * 255)}, 0, 255)`;\r\n    }\r\n    else if (rand > 0.8 && rand <= 1) {\r\n      return `rgb(0, ${Math.ceil(Math.random() * 255)}, 255)`;\r\n    }\r\n  }\r\n\r\n  const u = firebase.auth().currentUser;\r\n  let avatarColor = color(Math.random());\r\n  if (user && !u.photoURL) {\r\n    u.updateProfile({\r\n      photoURL: avatarColor,\r\n    })\r\n    console.log(u);\r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    auth.onAuthStateChanged((authUser) => {\r\n      console.log('user is:', authUser);\r\n      if (authUser) {\r\n        dispatch(login({\r\n          email: authUser.email,\r\n        }))\r\n\r\n      } else {\r\n        dispatch(logout());\r\n      }\r\n    });\r\n\r\n  }, [dispatch])\r\n  return (\r\n    <Router>\r\n      <div className=\"app\">\r\n        {user ?\r\n          <Switch>\r\n            <Route path='/channel'>\r\n              <Menu />\r\n              <ChannelsList />\r\n              <div className='chatField'>\r\n                <div className='chatField_menu'>\r\n                  <ChatMenu />\r\n                </div>\r\n                <div className='chatField_desktop'>\r\n                  <Chat />\r\n                  <MembersList />\r\n                </div>\r\n              </div>\r\n            </Route>\r\n            <Route path='/'>\r\n              <Menu />\r\n              <Friends />\r\n              <Desktop />\r\n            </Route>\r\n          </Switch>\r\n          :\r\n          <Route path='/'>\r\n            <Login />\r\n          </Route>\r\n        }\r\n      </div>\r\n    </Router >\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}