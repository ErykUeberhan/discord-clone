{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import'./Channel.css';import{FaHashtag}from\"react-icons/fa\";import{BsX}from\"react-icons/bs\";import{useDispatch,useSelector}from'react-redux';import{setChannelInfo,selectCategoryId,selectChannelId,selectServerId}from'./features/counter/appSlice';import db from'./firebase';function Channel(_ref){var id=_ref.id,title=_ref.title;var dispatch=useDispatch();var categoryId=useSelector(selectCategoryId);var channelId=useSelector(selectChannelId);var serverId=useSelector(selectServerId);var removeChannel=function removeChannel(){var channel=db.collection('servers').doc(serverId).collection('categories').doc(categoryId).collection('channels').doc(channelId);channel.collection('messages').get().then(function(rel){rel.forEach(function(element){element.ref.delete();});});channel.delete();dispatch(setChannelInfo({channelId:null}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"channel\",onClick:function onClick(){if(id!==channelId){dispatch(setChannelInfo({channelId:id,channelName:title}));}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"channel_title\",children:[/*#__PURE__*/_jsx(FaHashtag,{}),/*#__PURE__*/_jsx(\"p\",{className:\"channel_title_text\",children:title})]}),id===channelId?/*#__PURE__*/_jsx(BsX,{className:\"channel_remove\",onClick:removeChannel}):null]});}export default Channel;","map":{"version":3,"sources":["C:/Users/eryko/Desktop/ReactProjects/discord-clone/src/Channel.js"],"names":["React","FaHashtag","BsX","useDispatch","useSelector","setChannelInfo","selectCategoryId","selectChannelId","selectServerId","db","Channel","id","title","dispatch","categoryId","channelId","serverId","removeChannel","channel","collection","doc","get","then","rel","forEach","element","ref","delete","channelName"],"mappings":"wFAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,eAAP,CACA,OAASC,SAAT,KAA0B,gBAA1B,CACA,OAASC,GAAT,KAAoB,gBAApB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,cAAT,CAAyBC,gBAAzB,CAA2CC,eAA3C,CAA4DC,cAA5D,KAAkF,6BAAlF,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CAGA,QAASC,CAAAA,OAAT,MAAgC,IAAbC,CAAAA,EAAa,MAAbA,EAAa,CAATC,KAAS,MAATA,KAAS,CAC5B,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CACA,GAAMW,CAAAA,UAAU,CAAGV,WAAW,CAACE,gBAAD,CAA9B,CACA,GAAMS,CAAAA,SAAS,CAAGX,WAAW,CAACG,eAAD,CAA7B,CACA,GAAMS,CAAAA,QAAQ,CAAGZ,WAAW,CAACI,cAAD,CAA5B,CAEA,GAAMS,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxB,GAAMC,CAAAA,OAAO,CAAGT,EAAE,CAACU,UAAH,CAAc,SAAd,EAAyBC,GAAzB,CAA6BJ,QAA7B,EAAuCG,UAAvC,CAAkD,YAAlD,EAAgEC,GAAhE,CAAoEN,UAApE,EAAgFK,UAAhF,CAA2F,UAA3F,EAAuGC,GAAvG,CAA2GL,SAA3G,CAAhB,CACAG,OAAO,CAACC,UAAR,CAAmB,UAAnB,EAA+BE,GAA/B,GAAqCC,IAArC,CAA0C,SAACC,GAAD,CAAS,CAC/CA,GAAG,CAACC,OAAJ,CAAY,SAACC,OAAD,CAAa,CACrBA,OAAO,CAACC,GAAR,CAAYC,MAAZ,GACH,CAFD,EAGH,CAJD,EAMAT,OAAO,CAACS,MAAR,GAEAd,QAAQ,CACJR,cAAc,CAAC,CACXU,SAAS,CAAE,IADA,CAAD,CADV,CAAR,CAMH,CAhBD,CAiBA,mBACI,aAAK,SAAS,CAAC,SAAf,CAAyB,OAAO,CAAE,kBAAM,CACpC,GAAIJ,EAAE,GAAKI,SAAX,CAAsB,CAClBF,QAAQ,CACJR,cAAc,CAAC,CACXU,SAAS,CAAEJ,EADA,CAEXiB,WAAW,CAAEhB,KAFF,CAAD,CADV,CAAR,CAMH,CACJ,CATD,wBAUI,aAAK,SAAS,CAAC,eAAf,wBACI,KAAC,SAAD,IADJ,cAEI,UAAG,SAAS,CAAC,oBAAb,UAAmCA,KAAnC,EAFJ,GAVJ,CAeQD,EAAE,GAAKI,SAAP,cAEI,KAAC,GAAD,EAAK,SAAS,CAAC,gBAAf,CAAgC,OAAO,CAAEE,aAAzC,EAFJ,CAII,IAnBZ,GADJ,CAyBH,CAED,cAAeP,CAAAA,OAAf","sourcesContent":["import React from 'react';\r\nimport './Channel.css';\r\nimport { FaHashtag } from \"react-icons/fa\";\r\nimport { BsX } from \"react-icons/bs\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setChannelInfo, selectCategoryId, selectChannelId, selectServerId } from './features/counter/appSlice';\r\nimport db from './firebase';\r\n\r\n\r\nfunction Channel({ id, title }) {\r\n    const dispatch = useDispatch();\r\n    const categoryId = useSelector(selectCategoryId);\r\n    const channelId = useSelector(selectChannelId);\r\n    const serverId = useSelector(selectServerId);\r\n\r\n    const removeChannel = () => {\r\n        const channel = db.collection('servers').doc(serverId).collection('categories').doc(categoryId).collection('channels').doc(channelId);\r\n        channel.collection('messages').get().then((rel) => {\r\n            rel.forEach((element) => {\r\n                element.ref.delete();\r\n            })\r\n        })\r\n\r\n        channel.delete();\r\n\r\n        dispatch(\r\n            setChannelInfo({\r\n                channelId: null,\r\n            })\r\n        )\r\n\r\n    }\r\n    return (\r\n        <div className='channel' onClick={() => {\r\n            if (id !== channelId) {\r\n                dispatch(\r\n                    setChannelInfo({\r\n                        channelId: id,\r\n                        channelName: title,\r\n                    })\r\n                )\r\n            }\r\n        }}>\r\n            <div className='channel_title'>\r\n                <FaHashtag />\r\n                <p className='channel_title_text'>{title}</p>\r\n            </div>\r\n            {\r\n                id === channelId\r\n                    ?\r\n                    <BsX className='channel_remove' onClick={removeChannel} />\r\n                    :\r\n                    null\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Channel\r\n"]},"metadata":{},"sourceType":"module"}