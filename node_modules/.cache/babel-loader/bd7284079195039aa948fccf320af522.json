{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{BrowserRouter as Router,Route,Switch}from'react-router-dom';import'./App.css';import ChannelsList from'./ChannelsList';import Chat from'./Chat';import ChatMenu from'./ChatMenu';import Desktop from'./Desktop';import Friends from'./Friends';import MembersList from'./MembersList';import Menu from'./Menu';import{selectUser,login,logout}from'./features/counter/userSlice';import{auth}from'./firebase';import Login from'./Login';import firebase from'firebase';import{selectMobileMenu}from'./features/counter/appSlice';import MobileChannelsList from'./MobileChannelsList';function App(){var dispatch=useDispatch();var user=useSelector(selectUser);var mobileMenu=useSelector(selectMobileMenu);// randomize user avatar color\nvar color=function color(rand){var randomColor=Math.ceil(Math.random()*255);if(rand<=0.16)return\"rgb(255, \".concat(randomColor,\", 0)\");else if(rand>0.16&&rand<=0.32)return\"rgb(255, 0, \".concat(randomColor,\")\");else if(rand>0.32&&rand<=0.48)return\"rgb(\".concat(randomColor,\", 255, 0)\");else if(rand>0.48&&rand<=0.64)return\"rgb(0, 255, \".concat(randomColor,\")\");else if(rand>0.64&&rand<=0.8)return\"rgb(\".concat(randomColor,\", 0, 255)\");else return\"rgb(0, \".concat(randomColor,\", 255)\");};// add user avatar color to database\nvar userInfo=firebase.auth().currentUser;var avatarColor=color(Math.random());if(user&&!userInfo.photoURL){userInfo.updateProfile({photoURL:avatarColor});}// add user email to local storage\nuseEffect(function(){auth.onAuthStateChanged(function(authUser){if(authUser){dispatch(login({email:authUser.email}));}else{dispatch(logout());}});},[dispatch]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:user?/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsxs(Route,{path:\"/channel\",children:[/*#__PURE__*/_jsx(Menu,{}),mobileMenu===true?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MobileChannelsList,{}),/*#__PURE__*/_jsx(MembersList,{})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ChannelsList,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatField\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chatField_menu\",children:/*#__PURE__*/_jsx(ChatMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatField_desktop\",children:[/*#__PURE__*/_jsx(Chat,{}),/*#__PURE__*/_jsx(MembersList,{})]})]})]})]}),/*#__PURE__*/_jsxs(Route,{path:\"/\",children:[/*#__PURE__*/_jsx(Menu,{}),/*#__PURE__*/_jsx(Friends,{}),/*#__PURE__*/_jsx(Desktop,{})]})]}):/*#__PURE__*/_jsx(Route,{path:\"/\",children:/*#__PURE__*/_jsx(Login,{})})})});}export default App;","map":{"version":3,"sources":["C:/Users/eryko/Desktop/ReactProjects/discord-clone/src/App.js"],"names":["React","useEffect","useDispatch","useSelector","BrowserRouter","Router","Route","Switch","ChannelsList","Chat","ChatMenu","Desktop","Friends","MembersList","Menu","selectUser","login","logout","auth","Login","firebase","selectMobileMenu","MobileChannelsList","App","dispatch","user","mobileMenu","color","rand","randomColor","Math","ceil","random","userInfo","currentUser","avatarColor","photoURL","updateProfile","onAuthStateChanged","authUser","email"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport './App.css';\r\nimport ChannelsList from './ChannelsList';\r\nimport Chat from './Chat';\r\nimport ChatMenu from './ChatMenu';\r\nimport Desktop from './Desktop';\r\nimport Friends from './Friends';\r\nimport MembersList from './MembersList';\r\nimport Menu from './Menu';\r\nimport { selectUser, login, logout } from './features/counter/userSlice';\r\nimport { auth } from './firebase'\r\nimport Login from './Login';\r\nimport firebase from 'firebase';\r\nimport { selectMobileMenu } from './features/counter/appSlice';\r\nimport MobileChannelsList from './MobileChannelsList';\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector(selectUser);\r\n  const mobileMenu = useSelector(selectMobileMenu);\r\n\r\n  // randomize user avatar color\r\n  const color = (rand) => {\r\n    const randomColor = Math.ceil(Math.random() * 255);\r\n    if (rand <= 0.16) return `rgb(255, ${randomColor}, 0)`;\r\n    else if (rand > 0.16 && rand <= 0.32) return `rgb(255, 0, ${randomColor})`;\r\n    else if (rand > 0.32 && rand <= 0.48) return `rgb(${randomColor}, 255, 0)`;\r\n    else if (rand > 0.48 && rand <= 0.64) return `rgb(0, 255, ${randomColor})`;\r\n    else if (rand > 0.64 && rand <= 0.8) return `rgb(${randomColor}, 0, 255)`;\r\n    else return `rgb(0, ${randomColor}, 255)`;\r\n  }\r\n\r\n  // add user avatar color to database\r\n  const userInfo = firebase.auth().currentUser;\r\n  let avatarColor = color(Math.random());\r\n  if (user && !userInfo.photoURL) {\r\n    userInfo.updateProfile({\r\n      photoURL: avatarColor,\r\n    })\r\n  }\r\n\r\n\r\n  // add user email to local storage\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((authUser) => {\r\n      if (authUser) {\r\n        dispatch(login({\r\n          email: authUser.email,\r\n        }))\r\n\r\n      } else {\r\n        dispatch(logout());\r\n      }\r\n    });\r\n\r\n  }, [dispatch])\r\n  return (\r\n    <Router>\r\n      <div className=\"app\">\r\n        {user ?\r\n          <Switch>\r\n            <Route path='/channel'>\r\n              <Menu />\r\n              {\r\n                mobileMenu === true\r\n                  ?\r\n                  <>\r\n                    <MobileChannelsList />\r\n                    <MembersList />\r\n                  </>\r\n                  :\r\n                  <>\r\n                    <ChannelsList />\r\n                    <div className='chatField'>\r\n                      <div className='chatField_menu'>\r\n                        <ChatMenu />\r\n                      </div>\r\n                      <div className='chatField_desktop'>\r\n                        <Chat />\r\n                        <MembersList />\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n              }\r\n\r\n\r\n            </Route>\r\n            <Route path='/'>\r\n              <Menu />\r\n              <Friends />\r\n              <Desktop />\r\n            </Route>\r\n          </Switch>\r\n          :\r\n          <Route path='/'>\r\n            <Login />\r\n          </Route>\r\n        }\r\n      </div>\r\n    </Router >\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}