{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import{useDispatch,useSelector}from'react-redux';import{selectServerId,setServerInfo,setChannelInfo,setCategoryInfo}from'./features/counter/appSlice';import'./ServerIcon.css';import{BsX}from\"react-icons/bs\";import db from'./firebase';function ServerIcon(_ref){var id=_ref.id,title=_ref.title;var dispatch=useDispatch();var serverId=useSelector(selectServerId);var removeServer=function removeServer(){var server=db.collection('servers');server.doc(serverId).collection('categories').get().then(function(res){res.forEach(function(element){element.ref.collection('channels').get().then(function(res){res.forEach(function(element){element.ref.collection('messages').get().then(function(res){res.forEach(function(element){element.ref.delete();});element.ref.delete();});element.ref.delete();});element.ref.delete();});element.ref.delete();});});server.doc(serverId).delete();dispatch(setChannelInfo({channelId:null}));dispatch(setCategoryInfo({categoryId:null}));dispatch(setServerInfo({serverId:null}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"serverIcon\",onClick:function onClick(){if(id!==serverId){dispatch(setServerInfo({serverId:id,serverName:title}));}},children:[/*#__PURE__*/_jsx(\"p\",{className:\"serverIcon_title\",children:title?title[0]:null}),id===serverId?/*#__PURE__*/_jsx(\"div\",{className:\"serverIcon_remove\",onClick:removeServer,children:/*#__PURE__*/_jsx(BsX,{})}):null]});}export default ServerIcon;","map":{"version":3,"sources":["C:/Users/eryko/Desktop/ReactProjects/discord-clone/src/ServerIcon.js"],"names":["React","useDispatch","useSelector","selectServerId","setServerInfo","setChannelInfo","setCategoryInfo","BsX","db","ServerIcon","id","title","dispatch","serverId","removeServer","server","collection","doc","get","then","res","forEach","element","ref","delete","channelId","categoryId","serverName"],"mappings":"wFAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,cAAT,CAAyBC,aAAzB,CAAwCC,cAAxC,CAAwDC,eAAxD,KAA+E,6BAA/E,CACA,MAAO,kBAAP,CACA,OAASC,GAAT,KAAoB,gBAApB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CAGA,QAASC,CAAAA,UAAT,MAAmC,IAAbC,CAAAA,EAAa,MAAbA,EAAa,CAATC,KAAS,MAATA,KAAS,CAC/B,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,CAAAA,QAAQ,CAAGX,WAAW,CAACC,cAAD,CAA5B,CAEA,GAAMW,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB,GAAMC,CAAAA,MAAM,CAAGP,EAAE,CAACQ,UAAH,CAAc,SAAd,CAAf,CAGAD,MAAM,CAACE,GAAP,CAAWJ,QAAX,EAAqBG,UAArB,CAAgC,YAAhC,EAA8CE,GAA9C,GAAoDC,IAApD,CAAyD,SAACC,GAAD,CAAS,CAC9DA,GAAG,CAACC,OAAJ,CAAY,SAACC,OAAD,CAAa,CACrBA,OAAO,CAACC,GAAR,CAAYP,UAAZ,CAAuB,UAAvB,EAAmCE,GAAnC,GAAyCC,IAAzC,CAA8C,SAACC,GAAD,CAAS,CACnDA,GAAG,CAACC,OAAJ,CAAY,SAACC,OAAD,CAAa,CACrBA,OAAO,CAACC,GAAR,CAAYP,UAAZ,CAAuB,UAAvB,EAAmCE,GAAnC,GAAyCC,IAAzC,CAA8C,SAACC,GAAD,CAAS,CACnDA,GAAG,CAACC,OAAJ,CAAY,SAACC,OAAD,CAAa,CACrBA,OAAO,CAACC,GAAR,CAAYC,MAAZ,GACH,CAFD,EAGAF,OAAO,CAACC,GAAR,CAAYC,MAAZ,GACH,CALD,EAMAF,OAAO,CAACC,GAAR,CAAYC,MAAZ,GACH,CARD,EASAF,OAAO,CAACC,GAAR,CAAYC,MAAZ,GACH,CAXD,EAYAF,OAAO,CAACC,GAAR,CAAYC,MAAZ,GACH,CAdD,EAeH,CAhBD,EAkBAT,MAAM,CAACE,GAAP,CAAWJ,QAAX,EAAqBW,MAArB,GAEAZ,QAAQ,CACJP,cAAc,CAAC,CACXoB,SAAS,CAAE,IADA,CAAD,CADV,CAAR,CAMAb,QAAQ,CACJN,eAAe,CAAC,CACZoB,UAAU,CAAE,IADA,CAAD,CADX,CAAR,CAMAd,QAAQ,CACJR,aAAa,CAAC,CACVS,QAAQ,CAAE,IADA,CAAD,CADT,CAAR,CAKH,CAzCD,CA0CA,mBACI,aAAK,SAAS,CAAC,YAAf,CAA4B,OAAO,CAAE,kBAAM,CACvC,GAAIH,EAAE,GAAKG,QAAX,CAAqB,CACjBD,QAAQ,CACJR,aAAa,CAAC,CACVS,QAAQ,CAAEH,EADA,CAEViB,UAAU,CAAEhB,KAFF,CAAD,CADT,CAAR,CAMH,CAEJ,CAVD,wBAWI,UAAG,SAAS,CAAC,kBAAb,UAAiCA,KAAK,CAAGA,KAAK,CAAC,CAAD,CAAR,CAAc,IAApD,EAXJ,CAaQD,EAAE,GAAKG,QAAP,cACI,YAAK,SAAS,CAAC,mBAAf,CAAmC,OAAO,CAAEC,YAA5C,uBAA0D,KAAC,GAAD,IAA1D,EADJ,CAGI,IAhBZ,GADJ,CAsBH,CAED,cAAeL,CAAAA,UAAf","sourcesContent":["import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { selectServerId, setServerInfo, setChannelInfo, setCategoryInfo } from './features/counter/appSlice';\r\nimport './ServerIcon.css'\r\nimport { BsX } from \"react-icons/bs\";\r\nimport db from './firebase';\r\n\r\n\r\nfunction ServerIcon({ id, title }) {\r\n    const dispatch = useDispatch();\r\n    const serverId = useSelector(selectServerId);\r\n\r\n    const removeServer = () => {\r\n        const server = db.collection('servers');\r\n\r\n\r\n        server.doc(serverId).collection('categories').get().then((res) => {\r\n            res.forEach((element) => {\r\n                element.ref.collection('channels').get().then((res) => {\r\n                    res.forEach((element) => {\r\n                        element.ref.collection('messages').get().then((res) => {\r\n                            res.forEach((element) => {\r\n                                element.ref.delete();\r\n                            });\r\n                            element.ref.delete();\r\n                        });\r\n                        element.ref.delete();\r\n                    });\r\n                    element.ref.delete();\r\n                });\r\n                element.ref.delete();\r\n            });\r\n        });\r\n\r\n        server.doc(serverId).delete();\r\n\r\n        dispatch(\r\n            setChannelInfo({\r\n                channelId: null,\r\n            })\r\n        )\r\n\r\n        dispatch(\r\n            setCategoryInfo({\r\n                categoryId: null,\r\n            })\r\n        )\r\n\r\n        dispatch(\r\n            setServerInfo({\r\n                serverId: null,\r\n            })\r\n        )\r\n    }\r\n    return (\r\n        <div className='serverIcon' onClick={() => {\r\n            if (id !== serverId) {\r\n                dispatch(\r\n                    setServerInfo({\r\n                        serverId: id,\r\n                        serverName: title,\r\n                    })\r\n                )\r\n            }\r\n\r\n        }}>\r\n            <p className='serverIcon_title'>{title ? title[0] : null}</p>\r\n            {\r\n                id === serverId ?\r\n                    <div className='serverIcon_remove' onClick={removeServer}><BsX /></div>\r\n                    :\r\n                    null\r\n            }\r\n\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default ServerIcon\r\n"]},"metadata":{},"sourceType":"module"}